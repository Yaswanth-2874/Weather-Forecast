{"ast":null,"code":"import React,{Component}from\"react\";import FirstHalf from\"./DisplayFunction\";import SecondHalf from\"./SecondHalf\";import ErrorState from\"./ErrorState\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export class FetchingData extends Component{constructor(props){super(props);this.setQuery=query=>{if(query===\"\")return\"\".concat(this.state.lat,\",\").concat(this.state.long);return\"\".concat(this.state.query);};this.UpdateData=()=>{const q=this.setQuery(this.state.query);const currentWeather=\"https://api.weatherapi.com/v1/forecast.json?key=29a3ca58cd254f07866142055242202&q=\".concat(q,\"&days=6\");fetch(currentWeather).then(data=>{if(!data.ok){throw new Error();}this.setState({inErrorState:false});return data.json();}).then(formattedData=>{this.setState({information:formattedData});}).catch(()=>{this.setState({inErrorState:true});});};this.updateLocation=event=>{this.setState({userChoice:event.target.value});};this.onSubmitted=event=>{this.setState({query:this.state.userChoice});this.UpdateData();event.preventDefault();};this.handleButtonClick=index=>{this.setState({indexing:index});};this.extractDayWiseData=dayWiseData=>{const data=[];dayWiseData.forEach((day,index)=>{const avgTempC=day.day.avgtemp_c;const conditionIcon=day.day.condition.icon;const forecastedCondition=day.day.condition.text;const date=day.date;const maxWindKph=day.day.maxwind_kph;const avghum=day.day.avghumidity;data.push({index:index,date,avgTempC,maxWindKph,conditionIcon,forecastedCondition,avghum});});return data;};this.state={lat:NaN,long:NaN,userChoice:\"\",information:[],inErrorState:false,indexing:0,query:\"\"};}componentDidMount(){fetch(\"https://ipapi.co/json/\").then(address=>address.json()).then(values=>{this.setState({lat:values.latitude,long:values.longitude});}).catch(error=>{console.log(error);this.setState({inErrorState:true});});}render(){if(this.state.inErrorState)return/*#__PURE__*/_jsx(ErrorState,{});this.UpdateData();const{information}=this.state;if(!information||!this.state.lat||!this.state.long)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});const{current,location,forecast}=information;if(!current||!location||!forecast)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});const dayWiseData=forecast.forecastday;const data=this.extractDayWiseData(dayWiseData);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"searchbar\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{style:{display:\"flex\",justifyContent:\"space-evenly\",margin:\"10px\"},children:\"Weather Data\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:this.state.userChoice,onChange:this.updateLocation}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:this.onSubmitted,children:\"Search\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(FirstHalf,{data:data,index:this.state.indexing,location:location,current:current}),/*#__PURE__*/_jsx(SecondHalf,{data:data,func:this.handleButtonClick})]})]});}}export default FetchingData;","map":{"version":3,"names":["React","Component","FirstHalf","SecondHalf","ErrorState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FetchingData","constructor","props","setQuery","query","concat","state","lat","long","UpdateData","q","currentWeather","fetch","then","data","ok","Error","setState","inErrorState","json","formattedData","information","catch","updateLocation","event","userChoice","target","value","onSubmitted","preventDefault","handleButtonClick","index","indexing","extractDayWiseData","dayWiseData","forEach","day","avgTempC","avgtemp_c","conditionIcon","condition","icon","forecastedCondition","text","date","maxWindKph","maxwind_kph","avghum","avghumidity","push","NaN","componentDidMount","address","values","latitude","longitude","error","console","log","render","children","current","location","forecast","forecastday","className","style","display","justifyContent","margin","type","onChange","onClick","func"],"sources":["C:/Users/YASWANTH/OneDrive/Desktop/Projects/weatherforecast/weatherforecast/src/components/FetchingData.jsx"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport FirstHalf from \"./DisplayFunction\";\r\nimport SecondHalf from \"./SecondHalf\";\r\nimport ErrorState from \"./ErrorState\";\r\n\r\nexport class FetchingData extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      lat: NaN,\r\n      long: NaN,\r\n      userChoice: \"\",\r\n      information: [],\r\n      inErrorState: false,\r\n      indexing: 0,\r\n      query: \"\",\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    fetch(\"https://ipapi.co/json/\")\r\n      .then((address) => address.json())\r\n      .then((values) => {\r\n        this.setState({\r\n          lat: values.latitude,\r\n          long: values.longitude,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        this.setState({\r\n          inErrorState: true,\r\n        });\r\n      });\r\n  }\r\n  setQuery = (query) => {\r\n    if (query === \"\") return `${this.state.lat},${this.state.long}`;\r\n    return `${this.state.query}`;\r\n  };\r\n  UpdateData = () => {\r\n    const q = this.setQuery(this.state.query);\r\n    const currentWeather = `https://api.weatherapi.com/v1/forecast.json?key=29a3ca58cd254f07866142055242202&q=${q}&days=6`;\r\n    fetch(currentWeather)\r\n      .then((data) => {\r\n        if (!data.ok) {\r\n          throw new Error();\r\n        }\r\n        this.setState({\r\n          inErrorState: false,\r\n        });\r\n        return data.json();\r\n      })\r\n      .then((formattedData) => {\r\n        this.setState({\r\n          information: formattedData,\r\n        });\r\n      })\r\n      .catch(() => {\r\n        this.setState({\r\n          inErrorState: true,\r\n        });\r\n      });\r\n  };\r\n  updateLocation = (event) => {\r\n    this.setState({\r\n      userChoice: event.target.value,\r\n    });\r\n  };\r\n  onSubmitted = (event) => {\r\n    this.setState({\r\n      query: this.state.userChoice,\r\n    });\r\n    this.UpdateData();\r\n    event.preventDefault();\r\n  };\r\n  handleButtonClick = (index) => {\r\n    this.setState({\r\n      indexing: index,\r\n    });\r\n  };\r\n\r\n  extractDayWiseData = (dayWiseData) => {\r\n    const data = [];\r\n\r\n    dayWiseData.forEach((day, index) => {\r\n      const avgTempC = day.day.avgtemp_c;\r\n      const conditionIcon = day.day.condition.icon;\r\n      const forecastedCondition = day.day.condition.text;\r\n      const date = day.date;\r\n      const maxWindKph = day.day.maxwind_kph;\r\n      const avghum = day.day.avghumidity;\r\n      data.push({\r\n        index: index,\r\n        date,\r\n        avgTempC,\r\n        maxWindKph,\r\n        conditionIcon,\r\n        forecastedCondition,\r\n        avghum,\r\n      });\r\n    });\r\n    return data;\r\n  };\r\n\r\n  render() {\r\n    if (this.state.inErrorState) return <ErrorState />;\r\n\r\n    this.UpdateData();\r\n    const { information } = this.state;\r\n    if (!information || !this.state.lat || !this.state.long)\r\n      return <div>Loading...</div>;\r\n\r\n    const { current, location, forecast } = information;\r\n    if (!current || !location || !forecast) return <div>Loading...</div>;\r\n    const dayWiseData = forecast.forecastday;\r\n    const data = this.extractDayWiseData(dayWiseData);\r\n\r\n    return (\r\n      <>\r\n        <div className=\"searchbar\">\r\n          <div>\r\n            <h1\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-evenly\",\r\n                margin: \"10px\",\r\n              }}\r\n            >\r\n              Weather Data\r\n            </h1>\r\n          </div>\r\n          <div>\r\n            <input\r\n              type=\"text\"\r\n              value={this.state.userChoice}\r\n              onChange={this.updateLocation}\r\n            />\r\n            <button type=\"submit\" onClick={this.onSubmitted}>\r\n              Search\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"box\">\r\n          <FirstHalf\r\n            data={data}\r\n            index={this.state.indexing}\r\n            location={location}\r\n            current={current}\r\n          ></FirstHalf>\r\n          <SecondHalf data={data} func={this.handleButtonClick} />\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FetchingData;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}