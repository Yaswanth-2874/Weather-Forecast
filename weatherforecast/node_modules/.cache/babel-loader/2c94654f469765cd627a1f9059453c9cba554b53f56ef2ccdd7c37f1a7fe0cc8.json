{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\YASWANTH\\\\OneDrive\\\\Desktop\\\\Projects\\\\weatherforecast\\\\weatherforecast\\\\src\\\\components\\\\FetchingData.jsx\";\nimport React, { Component } from \"react\";\nimport DisplayButton from \"./DisplayButton\";\nimport DisplayFunction from \"./DisplayFunction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class FetchingData extends Component {\n  constructor(props) {\n    super(props);\n    this.setQuery = query => {\n      if (query === \"\") return `${this.state.lat},${this.state.long}`;\n      return `${this.state.query}`;\n    };\n    this.UpdateData = () => {\n      const q = this.setQuery(this.state.query);\n      const currentWeather = `https://api.weatherapi.com/v1/forecast.json?key=29a3ca58cd254f07866142055242202&q=${q}&days=6`;\n      fetch(currentWeather).then(data => {\n        if (!data.ok) {\n          throw new Error();\n        }\n        this.setState({\n          inErrorState: false\n        });\n        return data.json();\n      }).then(formattedData => {\n        this.setState({\n          information: formattedData\n        });\n      }).catch(() => {\n        this.setState({\n          inErrorState: true\n        });\n      });\n    };\n    this.updateLocation = event => {\n      this.setState({\n        userChoice: event.target.value\n      });\n    };\n    this.onSubmitted = event => {\n      this.setState({\n        query: this.state.userChoice\n      });\n      this.UpdateData();\n      event.preventDefault();\n    };\n    this.handleButtonClick = index => {\n      this.setState({\n        indexing: index\n      });\n    };\n    this.extractDayWiseData = dayWiseData => {\n      const data = [];\n      dayWiseData.forEach((day, index) => {\n        const avgTempC = day.day.avgtemp_c;\n        const conditionIcon = day.day.condition.icon;\n        const forecastedCondition = day.day.condition.text;\n        const date = day.date;\n        const maxWindKph = day.day.maxwind_kph;\n        const avghum = day.day.avghumidity;\n        data.push({\n          index: index,\n          date,\n          avgTempC,\n          maxWindKph,\n          conditionIcon,\n          forecastedCondition,\n          avghum\n        });\n      });\n      return data;\n    };\n    this.state = {\n      lat: NaN,\n      long: NaN,\n      userChoice: \"\",\n      information: [],\n      inErrorState: false,\n      indexing: 0,\n      query: \"\"\n    };\n  }\n  componentDidMount() {\n    fetch(\"https://ipapi.co/json/\").then(address => address.json()).then(values => {\n      this.setState({\n        lat: values.latitude,\n        long: values.longitude\n      });\n    }).catch(error => {\n      console.log(error);\n      this.setState({\n        inErrorState: true\n      });\n    });\n  }\n  render() {\n    if (this.state.inErrorState) return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Connection timed out due to poor internet or bad query or IP Address not detected. Please try Refreshing the page.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this)\n    }, void 0, false);\n    this.UpdateData();\n    const {\n      information\n    } = this.state;\n    if (!information || !this.state.lat || !this.state.long) return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 14\n    }, this);\n    const {\n      current,\n      location,\n      forecast\n    } = information;\n    if (!current || !location || !forecast) return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 52\n    }, this);\n    const dayWiseData = forecast.forecastday;\n    const data = this.extractDayWiseData(dayWiseData);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"searchbar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"space-evenly\",\n              margin: \"10px\"\n            },\n            children: \"Weather Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: this.state.userChoice,\n            onChange: this.updateLocation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            onClick: this.onSubmitted,\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"box\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"firsthalf\",\n          children: /*#__PURE__*/_jsxDEV(DisplayFunction, {\n            data: data,\n            index: this.state.indexing,\n            location: location,\n            current: current\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n}\nexport default FetchingData;","map":{"version":3,"names":["React","Component","DisplayButton","DisplayFunction","jsxDEV","_jsxDEV","Fragment","_Fragment","FetchingData","constructor","props","setQuery","query","state","lat","long","UpdateData","q","currentWeather","fetch","then","data","ok","Error","setState","inErrorState","json","formattedData","information","catch","updateLocation","event","userChoice","target","value","onSubmitted","preventDefault","handleButtonClick","index","indexing","extractDayWiseData","dayWiseData","forEach","day","avgTempC","avgtemp_c","conditionIcon","condition","icon","forecastedCondition","text","date","maxWindKph","maxwind_kph","avghum","avghumidity","push","NaN","componentDidMount","address","values","latitude","longitude","error","console","log","render","children","fileName","_jsxFileName","lineNumber","columnNumber","current","location","forecast","forecastday","className","style","display","justifyContent","margin","type","onChange","onClick"],"sources":["C:/Users/YASWANTH/OneDrive/Desktop/Projects/weatherforecast/weatherforecast/src/components/FetchingData.jsx"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport DisplayButton from \"./DisplayButton\";\r\nimport DisplayFunction from \"./DisplayFunction\";\r\n\r\nexport class FetchingData extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      lat: NaN,\r\n      long: NaN,\r\n      userChoice: \"\",\r\n      information: [],\r\n      inErrorState: false,\r\n      indexing: 0,\r\n      query: \"\",\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    fetch(\"https://ipapi.co/json/\")\r\n      .then((address) => address.json())\r\n      .then((values) => {\r\n        this.setState({\r\n          lat: values.latitude,\r\n          long: values.longitude,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        this.setState({\r\n          inErrorState: true,\r\n        });\r\n      });\r\n  }\r\n  setQuery = (query) => {\r\n    if (query === \"\") return `${this.state.lat},${this.state.long}`;\r\n    return `${this.state.query}`;\r\n  };\r\n  UpdateData = () => {\r\n    const q = this.setQuery(this.state.query);\r\n    const currentWeather = `https://api.weatherapi.com/v1/forecast.json?key=29a3ca58cd254f07866142055242202&q=${q}&days=6`;\r\n    fetch(currentWeather)\r\n      .then((data) => {\r\n        if (!data.ok) {\r\n          throw new Error();\r\n        }\r\n        this.setState({\r\n          inErrorState: false,\r\n        });\r\n        return data.json();\r\n      })\r\n      .then((formattedData) => {\r\n        this.setState({\r\n          information: formattedData,\r\n        });\r\n      })\r\n      .catch(() => {\r\n        this.setState({\r\n          inErrorState: true,\r\n        });\r\n      });\r\n  };\r\n  updateLocation = (event) => {\r\n    this.setState({\r\n      userChoice: event.target.value,\r\n    });\r\n  };\r\n  onSubmitted = (event) => {\r\n    this.setState({\r\n      query: this.state.userChoice,\r\n    });\r\n    this.UpdateData();\r\n    event.preventDefault();\r\n  };\r\n  handleButtonClick = (index) => {\r\n    this.setState({\r\n      indexing: index,\r\n    });\r\n  };\r\n\r\n  extractDayWiseData = (dayWiseData) => {\r\n    const data = [];\r\n\r\n    dayWiseData.forEach((day, index) => {\r\n      const avgTempC = day.day.avgtemp_c;\r\n      const conditionIcon = day.day.condition.icon;\r\n      const forecastedCondition = day.day.condition.text;\r\n      const date = day.date;\r\n      const maxWindKph = day.day.maxwind_kph;\r\n      const avghum = day.day.avghumidity;\r\n      data.push({\r\n        index: index,\r\n        date,\r\n        avgTempC,\r\n        maxWindKph,\r\n        conditionIcon,\r\n        forecastedCondition,\r\n        avghum,\r\n      });\r\n    });\r\n    return data;\r\n  };\r\n  render() {\r\n    if (this.state.inErrorState)\r\n      return (\r\n        <>\r\n          <h2>\r\n            Connection timed out due to poor internet or bad query or IP Address not detected. Please try\r\n            Refreshing the page.\r\n          </h2>\r\n        </>\r\n      );\r\n\r\n    this.UpdateData();\r\n    const { information } = this.state;\r\n    if (!information || !this.state.lat || !this.state.long)\r\n      return <div>Loading...</div>;\r\n\r\n    const { current, location, forecast } = information;\r\n    if (!current || !location || !forecast) return <div>Loading...</div>;\r\n    const dayWiseData = forecast.forecastday;\r\n    const data = this.extractDayWiseData(dayWiseData);\r\n\r\n    return (\r\n      <>\r\n        <div className=\"searchbar\">\r\n          <div>\r\n            <h1\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-evenly\",\r\n                margin: \"10px\",\r\n              }}\r\n            >\r\n              Weather Data\r\n            </h1>\r\n          </div>\r\n          <div>\r\n            <input\r\n              type=\"text\"\r\n              value={this.state.userChoice}\r\n              onChange={this.updateLocation}\r\n            />\r\n            <button type=\"submit\" onClick={this.onSubmitted}>\r\n              Search\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"box\">\r\n          <div className=\"firsthalf\">\r\n            <DisplayFunction\r\n              data={data}\r\n              index={this.state.indexing}\r\n              location={location}\r\n              current={current}\r\n            ></DisplayFunction>\r\n          </div>\r\n          \r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FetchingData;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}